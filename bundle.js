(()=>{"use strict";var e=function(e,t,n){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?(t.disabled=!1,t.classList.remove(n.inactiveButtonClass)):(t.disabled=!0,t.classList.add(n.inactiveButtonClass))};function t(e,t,n,o){var r=document.querySelector("#card-template").content.querySelector(".card").cloneNode(!0),u=r.querySelector(".card__image"),c=r.querySelector(".card__title"),i=r.querySelector(".card__delete-button"),a=r.querySelector(".card__like-button");return u.src=e.link,u.alt=e.name,c.textContent=e.name,i.addEventListener("click",(function(){return t(r)})),a.addEventListener("click",n),u.addEventListener("click",(function(){return o(e)})),r}function n(e){e.remove()}function o(e){e.target.classList.toggle("card__like-button_is-active")}var r=function(e){e.target===e.currentTarget&&i(e.target)};function u(e){"Escape"===e.key&&i(document.querySelector(".popup_opened"))}function c(e){e.classList.add("popup_opened"),document.addEventListener("keydown",u),e.addEventListener("mousedown",r)}function i(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",u),e.removeEventListener("mousedown",r)}var a,l=document.querySelector(".profile__edit-button"),p=document.querySelector(".profile__add-button"),d=document.querySelector(".popup_type_edit"),s=document.querySelector(".popup_type_new-card"),_=document.querySelector(".popup_type_image"),v=document.forms["edit-profile"],f=document.forms["new-place"],m=v.querySelector(".popup__input_type_name"),y=v.querySelector(".popup__input_type_description"),L=document.querySelector(".profile__title"),S=document.querySelector(".profile__description"),E=document.querySelector(".places__list"),q=f.querySelector(".popup__input_type_card-name"),C=f.querySelector(".popup__input_type_url"),k=_.querySelector(".popup__image"),b=_.querySelector(".popup__caption"),g=(document.querySelector("#card-template").content,document.querySelector(".places__list"));function x(e){e.classList.add("popup_is-opened"),document.addEventListener("keydown",w)}function h(e){e.classList.remove("popup_is-opened"),document.removeEventListener("keydown",w)}function w(e){"Escape"===e.key&&h(document.querySelector(".popup_is-opened"))}function D(e){e.target===e.currentTarget&&h(e.currentTarget)}function A(e){k.src=e.link,k.alt="Изображение ".concat(e.name),b.textContent=e.name,x(_)}function B(e){e.preventDefault(),profileTitle.textContent=m.value,S.textContent=y.value,h(profilePopup)}function T(e){e.preventDefault();var n=t({name:q.value,link:C.value},handleDeleteCard,handleLikeCard,A);g.prepend(n),f.reset(),h(cardPopup)}function P(){m.value=profileTitle.textContent,y.value=S.textContent,x(profilePopup)}function M(){f.reset(),x(cardPopup)}function N(e){var r=t(e,n,o,(function(e){k.src=e.link,k.alt=e.name,b.textContent=e.name,c(_)}));E.prepend(r)}l.addEventListener("click",(function(){m.value=L.textContent,y.value=S.textContent,c(d)})),p.addEventListener("click",(function(){f.reset(),c(s)})),v.addEventListener("submit",(function(e){e.preventDefault(),L.textContent=m.value,S.textContent=y.value,i(d)})),f.addEventListener("submit",(function(e){e.preventDefault(),N({name:q.value,link:C.value}),i(s)})),document.querySelectorAll(".popup__close").forEach((function(e){var t=e.closest(".popup");e.addEventListener("click",(function(){return i(t)}))})),initialCards.forEach(N),document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".popup").forEach((function(e){e.classList.add("popup_is-animated"),e.addEventListener("click",D)})),document.querySelectorAll(".popup__close").forEach((function(e){var t=e.closest(".popup");e.addEventListener("click",(function(){return h(t)}))})),initialCards.forEach((function(e){var n=t(e,handleDeleteCard,handleLikeCard,A);g.append(n)})),l.addEventListener("click",P),p.addEventListener("click",M),v.addEventListener("submit",B),f.addEventListener("submit",T)})),a={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},Array.from(document.querySelectorAll(a.formSelector)).forEach((function(t){t.addEventListener("submit",(function(e){e.preventDefault()})),function(t,n){var o=Array.from(t.querySelectorAll(n.inputSelector)),r=t.querySelector(n.submitButtonSelector);e(o,r,n),o.forEach((function(u){u.addEventListener("input",(function(){!function(e,t,n){t.validity.valid?function(e,t,n){var o=e.querySelector(".".concat(t.id,"-error"));t.classList.remove(n.inputErrorClass),o.classList.remove(n.errorClass),o.textContent=""}(e,t,n):function(e,t,n,o){var r=e.querySelector(".".concat(t.id,"-error"));t.classList.add(o.inputErrorClass),r.textContent=n,r.classList.add(o.errorClass)}(e,t,t.validationMessage,n)}(t,u,n),e(o,r,n)}))}))}(t,a)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFVRyxJQUFJVixFQUFTNkYsV0FDeEMsQ0FXUVEsQ0FBZUwsRUFBYTlGLEVBQWNBLEVBQWFvRyxrQkFBbUJ0RyxFQUlsRixDQTBCWXVHLENBQW1CUCxFQUFhOUYsRUFBY0YsR0FDOUNILEVBQWtCQyxFQUFXQyxFQUFlQyxFQUNoRCxHQUNKLEdBQ0osQ0FTUXdHLENBQWtCUixFQUFhaEcsRUFDbkMsRyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NjcmlwdHMvY29tcG9uZW50cy92YWxpZGF0ZS5qcyIsIndlYnBhY2s6Ly8vLi9zY3JpcHRzL2NvbXBvbmVudHMvY2FyZC5qcyIsIndlYnBhY2s6Ly8vLi9zY3JpcHRzL2NvbXBvbmVudHMvbW9kYWwuanMiLCJ3ZWJwYWNrOi8vLy4vc2NyaXB0cy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBzaG93SW5wdXRFcnJvciA9IChmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UsIHNldHRpbmdzKSA9PiB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZChzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQoc2V0dGluZ3MuZXJyb3JDbGFzcyk7XHJcbn07XHJcblxyXG5jb25zdCBoaWRlSW5wdXRFcnJvciA9IChmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBzZXR0aW5ncykgPT4ge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHNldHRpbmdzLmVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gJyc7XHJcbn07XHJcblxyXG5jb25zdCBjaGVja0lucHV0VmFsaWRpdHkgPSAoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgc2V0dGluZ3MpID0+IHtcclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgICAgc2hvd0lucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlLCBzZXR0aW5ncyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGhpZGVJbnB1dEVycm9yKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIHNldHRpbmdzKTtcclxuICAgIH1cclxufTtcclxuXHJcbmNvbnN0IGhhc0ludmFsaWRJbnB1dCA9IChpbnB1dExpc3QpID0+IHtcclxuICAgIHJldHVybiBpbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbmNvbnN0IHRvZ2dsZUJ1dHRvblN0YXRlID0gKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgc2V0dGluZ3MpID0+IHtcclxuICAgIGlmIChoYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSkge1xyXG4gICAgICAgIGJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZChzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIH1cclxufTtcclxuXHJcbmNvbnN0IHNldEV2ZW50TGlzdGVuZXJzID0gKGZvcm1FbGVtZW50LCBzZXR0aW5ncykgPT4ge1xyXG4gICAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHNldHRpbmdzLmlucHV0U2VsZWN0b3IpKTtcclxuICAgIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuXHJcbiAgICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIHNldHRpbmdzKTtcclxuXHJcbiAgICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjaGVja0lucHV0VmFsaWRpdHkoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgc2V0dGluZ3MpO1xyXG4gICAgICAgICAgICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIHNldHRpbmdzKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9IChzZXR0aW5ncykgPT4ge1xyXG4gICAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2V0dGluZ3MuZm9ybVNlbGVjdG9yKSk7XHJcbiAgICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xyXG4gICAgICAgIGZvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcclxuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHNldEV2ZW50TGlzdGVuZXJzKGZvcm1FbGVtZW50LCBzZXR0aW5ncyk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbmV4cG9ydCB7IGVuYWJsZVZhbGlkYXRpb24gfTsiLCJmdW5jdGlvbiBjcmVhdGVDYXJkKGNhcmREYXRhLCBkZWxldGVDYWxsYmFjaywgbGlrZUNhbGxiYWNrLCBvcGVuSW1hZ2VDYWxsYmFjaykge1xyXG4gICAgY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NhcmQtdGVtcGxhdGUnKS5jb250ZW50O1xyXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkVGVtcGxhdGUucXVlcnlTZWxlY3RvcignLmNhcmQnKS5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICBjb25zdCBjYXJkSW1hZ2UgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9faW1hZ2UnKTtcclxuICAgIGNvbnN0IGNhcmRUaXRsZSA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX190aXRsZScpO1xyXG4gICAgY29uc3QgZGVsZXRlQnV0dG9uID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2RlbGV0ZS1idXR0b24nKTtcclxuICAgIGNvbnN0IGxpa2VCdXR0b24gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbGlrZS1idXR0b24nKTtcclxuXHJcbiAgICBjYXJkSW1hZ2Uuc3JjID0gY2FyZERhdGEubGluaztcclxuICAgIGNhcmRJbWFnZS5hbHQgPSBjYXJkRGF0YS5uYW1lO1xyXG4gICAgY2FyZFRpdGxlLnRleHRDb250ZW50ID0gY2FyZERhdGEubmFtZTtcclxuXHJcbiAgICBkZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBkZWxldGVDYWxsYmFjayhjYXJkRWxlbWVudCkpO1xyXG4gICAgbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGxpa2VDYWxsYmFjayk7XHJcbiAgICBjYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBvcGVuSW1hZ2VDYWxsYmFjayhjYXJkRGF0YSkpO1xyXG5cclxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcclxufVxyXG5cclxuZnVuY3Rpb24gZGVsZXRlQ2FyZChjYXJkRWxlbWVudCkge1xyXG4gICAgY2FyZEVsZW1lbnQucmVtb3ZlKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGxpa2VDYXJkKGV2dCkge1xyXG4gICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKCdjYXJkX19saWtlLWJ1dHRvbl9pcy1hY3RpdmUnKTtcclxufVxyXG5cclxuZXhwb3J0IHsgY3JlYXRlQ2FyZCwgZGVsZXRlQ2FyZCwgbGlrZUNhcmQgfTsiLCJjb25zdCBjbG9zZVBvcHVwT25PdmVybGF5Q2xpY2sgPSAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoZXZ0LnRhcmdldCA9PT0gZXZ0LmN1cnJlbnRUYXJnZXQpIHtcclxuICAgICAgICBjbG9zZVBvcHVwKGV2dC50YXJnZXQpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuY29uc3Qgc2V0T3ZlcmxheUxpc3RlbmVyID0gKHBvcHVwKSA9PiB7XHJcbiAgICBwb3B1cC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBjbG9zZVBvcHVwT25PdmVybGF5Q2xpY2spO1xyXG59O1xyXG5cclxuY29uc3QgcmVtb3ZlT3ZlcmxheUxpc3RlbmVyID0gKHBvcHVwKSA9PiB7XHJcbiAgICBwb3B1cC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBjbG9zZVBvcHVwT25PdmVybGF5Q2xpY2spO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gY2xvc2VCeUVzYyhldnQpIHtcclxuICAgIGlmIChldnQua2V5ID09PSAnRXNjYXBlJykge1xyXG4gICAgICAgIGNvbnN0IG9wZW5lZFBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX29wZW5lZCcpO1xyXG4gICAgICAgIGNsb3NlUG9wdXAob3BlbmVkUG9wdXApO1xyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBzZXRFc2NMaXN0ZW5lciA9ICgpID0+IHtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBjbG9zZUJ5RXNjKTtcclxufTtcclxuXHJcbmNvbnN0IHJlbW92ZUVzY0xpc3RlbmVyID0gKCkgPT4ge1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGNsb3NlQnlFc2MpO1xyXG59O1xyXG5mdW5jdGlvbiBvcGVuUG9wdXAocG9wdXApIHtcclxuICAgIHBvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGNsb3NlQnlFc2MpO1xyXG4gICAgcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgY2xvc2VQb3B1cE9uT3ZlcmxheUNsaWNrKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY2xvc2VQb3B1cChwb3B1cCkge1xyXG4gICAgcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgY2xvc2VCeUVzYyk7XHJcbiAgICBwb3B1cC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBjbG9zZVBvcHVwT25PdmVybGF5Q2xpY2spO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IHsgb3BlblBvcHVwLCBjbG9zZVBvcHVwIH07XHJcbmV4cG9ydCB7IGNsb3NlQnlFc2MsIHNldEVzY0xpc3RlbmVyLCByZW1vdmVFc2NMaXN0ZW5lciwgc2V0T3ZlcmxheUxpc3RlbmVyLCByZW1vdmVPdmVybGF5TGlzdGVuZXIgfTtcclxuIiwiaW1wb3J0IHsgZW5hYmxlVmFsaWRhdGlvbiB9IGZyb20gJ0Bjb21wb25lbnRzL3ZhbGlkYXRlLmpzJztcbmltcG9ydCB7IGNyZWF0ZUNhcmQsIGRlbGV0ZUNhcmQsIGxpa2VDYXJkIH0gZnJvbSAnQGNvbXBvbmVudHMvY2FyZC5qcyc7XG5pbXBvcnQgeyBvcGVuUG9wdXAsIGNsb3NlUG9wdXAgfSBmcm9tICdAY29tcG9uZW50cy9tb2RhbCc7XG5pbXBvcnQgJy4uL3BhZ2VzL2luZGV4LmNzcyc7XG5cblxuXG5cbi8vINCt0LvQtdC80LXQvdGC0YsgRE9NXG5jb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWJ1dHRvbicpO1xuY29uc3QgcHJvZmlsZUFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQtYnV0dG9uJyk7XG5jb25zdCBwcm9maWxlRWRpdFBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfZWRpdCcpO1xuY29uc3QgY2FyZEFkZFBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfbmV3LWNhcmQnKTtcbmNvbnN0IGltYWdlUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfdHlwZV9pbWFnZScpO1xuY29uc3QgcHJvZmlsZUZvcm0gPSBkb2N1bWVudC5mb3Jtc1snZWRpdC1wcm9maWxlJ107XG5jb25zdCBjYXJkRm9ybSA9IGRvY3VtZW50LmZvcm1zWyduZXctcGxhY2UnXTtcbmNvbnN0IG5hbWVJbnB1dCA9IHByb2ZpbGVGb3JtLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfdHlwZV9uYW1lJyk7XG5jb25zdCBqb2JJbnB1dCA9IHByb2ZpbGVGb3JtLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfdHlwZV9kZXNjcmlwdGlvbicpO1xuY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fdGl0bGUnKTtcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19kZXNjcmlwdGlvbicpO1xuY29uc3QgY2FyZHNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGxhY2VzX19saXN0Jyk7XG5jb25zdCBjYXJkTmFtZUlucHV0ID0gY2FyZEZvcm0ucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dF90eXBlX2NhcmQtbmFtZScpO1xuY29uc3QgY2FyZExpbmtJbnB1dCA9IGNhcmRGb3JtLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfdHlwZV91cmwnKTtcbmNvbnN0IGltYWdlUG9wdXBJbWFnZSA9IGltYWdlUG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWFnZScpO1xuY29uc3QgaW1hZ2VQb3B1cENhcHRpb24gPSBpbWFnZVBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2FwdGlvbicpO1xuXG4vLyDQotC10LzQv9C70LXQudGCINC60LDRgNGC0L7Rh9C60LhcbmNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjYXJkLXRlbXBsYXRlJykuY29udGVudDtcblxuLy8gRE9NINGD0LfQu9GLXG5jb25zdCBwbGFjZXNMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBsYWNlc19fbGlzdCcpO1xuXG5cbi8vINCk0YPQvdC60YbQuNC4INC00LvRjyDRgNCw0LHQvtGC0Ysg0YEg0LzQvtC00LDQu9GM0L3Ri9C80Lgg0L7QutC90LDQvNC4XG5mdW5jdGlvbiBvcGVuTW9kYWwocG9wdXApIHtcbiAgICBwb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9pcy1vcGVuZWQnKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlRXNjYXBlS2V5KTtcbn1cblxuZnVuY3Rpb24gY2xvc2VNb2RhbChwb3B1cCkge1xuICAgIHBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX2lzLW9wZW5lZCcpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVFc2NhcGVLZXkpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVFc2NhcGVLZXkoZXZ0KSB7XG4gICAgaWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICAgIGNvbnN0IG9wZW5lZFBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX2lzLW9wZW5lZCcpO1xuICAgICAgICBjbG9zZU1vZGFsKG9wZW5lZFBvcHVwKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGhhbmRsZU92ZXJsYXlDbGljayhldnQpIHtcbiAgICBpZiAoZXZ0LnRhcmdldCA9PT0gZXZ0LmN1cnJlbnRUYXJnZXQpIHtcbiAgICAgICAgY2xvc2VNb2RhbChldnQuY3VycmVudFRhcmdldCk7XG4gICAgfVxufVxuXG4vLyDQlNC+0LHQsNCy0LvRj9C10Lwg0LDQvdC40LzQsNGG0LjRjiDQstGB0LXQvCDQv9C+0L/QsNC/0LDQvFxuZnVuY3Rpb24gYWRkUG9wdXBBbmltYXRpb25zKCkge1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cCcpLmZvckVhY2gocG9wdXAgPT4ge1xuICAgICAgICBwb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9pcy1hbmltYXRlZCcpO1xuICAgICAgICBwb3B1cC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZU92ZXJsYXlDbGljayk7XG4gICAgfSk7XG59XG5cblxuXG4vLyDQpNGD0L3QutGG0LjRjyDQvtGC0LrRgNGL0YLQuNGPINC40LfQvtCx0YDQsNC20LXQvdC40Y9cbmZ1bmN0aW9uIGhhbmRsZUltYWdlQ2xpY2soY2FyZERhdGEpIHtcbiAgICBpbWFnZVBvcHVwSW1hZ2Uuc3JjID0gY2FyZERhdGEubGluaztcbiAgICBpbWFnZVBvcHVwSW1hZ2UuYWx0ID0gYNCY0LfQvtCx0YDQsNC20LXQvdC40LUgJHtjYXJkRGF0YS5uYW1lfWA7XG4gICAgaW1hZ2VQb3B1cENhcHRpb24udGV4dENvbnRlbnQgPSBjYXJkRGF0YS5uYW1lO1xuICAgIG9wZW5Nb2RhbChpbWFnZVBvcHVwKTtcbn1cblxuLy8g0J7QsdGA0LDQsdC+0YLRh9C40LrQuCDRhNC+0YDQvFxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQoZXZ0KSB7XG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgcHJvZmlsZVRpdGxlLnRleHRDb250ZW50ID0gbmFtZUlucHV0LnZhbHVlO1xuICAgIHByb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IGpvYklucHV0LnZhbHVlO1xuICAgIGNsb3NlTW9kYWwocHJvZmlsZVBvcHVwKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQ2FyZEZvcm1TdWJtaXQoZXZ0KSB7XG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBjb25zdCBuZXdDYXJkID0ge1xuICAgICAgICBuYW1lOiBjYXJkTmFtZUlucHV0LnZhbHVlLFxuICAgICAgICBsaW5rOiBjYXJkTGlua0lucHV0LnZhbHVlXG4gICAgfTtcblxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChuZXdDYXJkLCBoYW5kbGVEZWxldGVDYXJkLCBoYW5kbGVMaWtlQ2FyZCwgaGFuZGxlSW1hZ2VDbGljayk7XG4gICAgcGxhY2VzTGlzdC5wcmVwZW5kKGNhcmRFbGVtZW50KTtcblxuICAgIGNhcmRGb3JtLnJlc2V0KCk7XG4gICAgY2xvc2VNb2RhbChjYXJkUG9wdXApO1xufVxuXG4vLyDQntCx0YDQsNCx0L7RgtGH0LjQutC4INC+0YLQutGA0YvRgtC40Y8g0L/QvtC/0LDQv9C+0LJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVFZGl0Q2xpY2soKSB7XG4gICAgbmFtZUlucHV0LnZhbHVlID0gcHJvZmlsZVRpdGxlLnRleHRDb250ZW50O1xuICAgIGpvYklucHV0LnZhbHVlID0gcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50O1xuICAgIG9wZW5Nb2RhbChwcm9maWxlUG9wdXApO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVBZGRDYXJkQ2xpY2soKSB7XG4gICAgY2FyZEZvcm0ucmVzZXQoKTtcbiAgICBvcGVuTW9kYWwoY2FyZFBvcHVwKTtcbn1cblxuLy8g0JjQvdC40YbQuNCw0LvQuNC30LDRhtC40Y8g0L/QvtC/0LDQv9C+0LJcbmZ1bmN0aW9uIHNldHVwUG9wdXBDbG9zZUJ1dHRvbnMoKSB7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19jbG9zZScpLmZvckVhY2goYnV0dG9uID0+IHtcbiAgICAgICAgY29uc3QgcG9wdXAgPSBidXR0b24uY2xvc2VzdCgnLnBvcHVwJyk7XG4gICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IGNsb3NlTW9kYWwocG9wdXApKTtcbiAgICB9KTtcbn1cblxuLy8g0KTRg9C90LrRhtC40Lgg0YDQsNCx0L7RgtGLINGBINC60LDRgNGC0L7Rh9C60LDQvNC4XG5mdW5jdGlvbiByZW5kZXJDYXJkKGNhcmREYXRhKSB7XG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKFxuICAgICAgICBjYXJkRGF0YSxcbiAgICAgICAgZGVsZXRlQ2FyZCxcbiAgICAgICAgbGlrZUNhcmQsXG4gICAgICAgIChkYXRhKSA9PiB7XG4gICAgICAgICAgICBpbWFnZVBvcHVwSW1hZ2Uuc3JjID0gZGF0YS5saW5rO1xuICAgICAgICAgICAgaW1hZ2VQb3B1cEltYWdlLmFsdCA9IGRhdGEubmFtZTtcbiAgICAgICAgICAgIGltYWdlUG9wdXBDYXB0aW9uLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICAgICAgICAgICAgb3BlblBvcHVwKGltYWdlUG9wdXApO1xuICAgICAgICB9XG4gICAgKTtcbiAgICBjYXJkc0NvbnRhaW5lci5wcmVwZW5kKGNhcmRFbGVtZW50KTtcbn1cblxuLy8g0J7QsdGA0LDQsdC+0YLRh9C40LrQuCDQvtGC0LrRgNGL0YLQuNGPINC/0L7Qv9Cw0L/QvtCyXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBuYW1lSW5wdXQudmFsdWUgPSBwcm9maWxlTmFtZS50ZXh0Q29udGVudDtcbiAgICBqb2JJbnB1dC52YWx1ZSA9IHByb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudDtcbiAgICBvcGVuUG9wdXAocHJvZmlsZUVkaXRQb3B1cCk7XG59KTtcblxucHJvZmlsZUFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBjYXJkRm9ybS5yZXNldCgpO1xuICAgIG9wZW5Qb3B1cChjYXJkQWRkUG9wdXApO1xufSk7XG5cbi8vINCe0LHRgNCw0LHQvtGC0YfQuNC60Lgg0YHQsNCx0LzQuNGC0LAg0YTQvtGA0LxcbnByb2ZpbGVGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICBwcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IG5hbWVJbnB1dC52YWx1ZTtcbiAgICBwcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBqb2JJbnB1dC52YWx1ZTtcbiAgICBjbG9zZVBvcHVwKHByb2ZpbGVFZGl0UG9wdXApO1xufSk7XG5cbmNhcmRGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICByZW5kZXJDYXJkKHtcbiAgICAgICAgbmFtZTogY2FyZE5hbWVJbnB1dC52YWx1ZSxcbiAgICAgICAgbGluazogY2FyZExpbmtJbnB1dC52YWx1ZVxuICAgIH0pO1xuICAgIGNsb3NlUG9wdXAoY2FyZEFkZFBvcHVwKTtcbn0pO1xuXG4vLyDQl9Cw0LrRgNGL0YLQuNC1INC/0L7Qv9Cw0L/QvtCyINC/0L4g0LrRgNC10YHRgtC40LrRg1xuZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19jbG9zZScpLmZvckVhY2goKGJ1dHRvbikgPT4ge1xuICAgIGNvbnN0IHBvcHVwID0gYnV0dG9uLmNsb3Nlc3QoJy5wb3B1cCcpO1xuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IGNsb3NlUG9wdXAocG9wdXApKTtcbn0pO1xuXG5pbml0aWFsQ2FyZHMuZm9yRWFjaChyZW5kZXJDYXJkKTtcblxuLy8g0JjQvdC40YbQuNCw0LvQuNC30LDRhtC40Y8g0L/RgNC40LvQvtC20LXQvdC40Y9cbmZ1bmN0aW9uIGluaXQoKSB7XG4gICAgYWRkUG9wdXBBbmltYXRpb25zKCk7XG4gICAgc2V0dXBQb3B1cENsb3NlQnV0dG9ucygpO1xuICAgIHJlbmRlckluaXRpYWxDYXJkcygpO1xuXG4gICAgcHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVQcm9maWxlRWRpdENsaWNrKTtcbiAgICBwcm9maWxlQWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlQWRkQ2FyZENsaWNrKTtcblxuICAgIHByb2ZpbGVGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KTtcbiAgICBjYXJkRm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBoYW5kbGVDYXJkRm9ybVN1Ym1pdCk7XG59XG5cbi8vINCX0LDQv9GD0YHQuiDQv9GA0LjQu9C+0LbQtdC90LjRj1xuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGluaXQpO1xuXG5cbmNvbnN0IHZhbGlkYXRpb25TZXR0aW5ncyA9IHtcbiAgICBmb3JtU2VsZWN0b3I6ICcucG9wdXBfX2Zvcm0nLFxuICAgIGlucHV0U2VsZWN0b3I6ICcucG9wdXBfX2lucHV0JyxcbiAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5wb3B1cF9fYnV0dG9uJyxcbiAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAncG9wdXBfX2J1dHRvbl9kaXNhYmxlZCcsXG4gICAgaW5wdXRFcnJvckNsYXNzOiAncG9wdXBfX2lucHV0X3R5cGVfZXJyb3InLFxuICAgIGVycm9yQ2xhc3M6ICdwb3B1cF9fZXJyb3JfdmlzaWJsZSdcbn07XG5cblxuLy8g0JjQvdC40YbQuNCw0LvQuNC30LDRhtC40Y8g0LrQsNGA0YLQvtGH0LXQulxuZnVuY3Rpb24gcmVuZGVySW5pdGlhbENhcmRzKCkge1xuICAgIGluaXRpYWxDYXJkcy5mb3JFYWNoKGNhcmREYXRhID0+IHtcbiAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKGNhcmREYXRhLCBoYW5kbGVEZWxldGVDYXJkLCBoYW5kbGVMaWtlQ2FyZCwgaGFuZGxlSW1hZ2VDbGljayk7XG4gICAgICAgIHBsYWNlc0xpc3QuYXBwZW5kKGNhcmRFbGVtZW50KTtcbiAgICB9KTtcbn1cbmVuYWJsZVZhbGlkYXRpb24odmFsaWRhdGlvblNldHRpbmdzKTsiXSwibmFtZXMiOlsidG9nZ2xlQnV0dG9uU3RhdGUiLCJpbnB1dExpc3QiLCJidXR0b25FbGVtZW50Iiwic2V0dGluZ3MiLCJzb21lIiwiaW5wdXRFbGVtZW50IiwidmFsaWRpdHkiLCJ2YWxpZCIsImhhc0ludmFsaWRJbnB1dCIsImRpc2FibGVkIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImFkZCIsImNyZWF0ZUNhcmQiLCJjYXJkRGF0YSIsImRlbGV0ZUNhbGxiYWNrIiwibGlrZUNhbGxiYWNrIiwib3BlbkltYWdlQ2FsbGJhY2siLCJjYXJkRWxlbWVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJjYXJkSW1hZ2UiLCJjYXJkVGl0bGUiLCJkZWxldGVCdXR0b24iLCJsaWtlQnV0dG9uIiwic3JjIiwibGluayIsImFsdCIsIm5hbWUiLCJ0ZXh0Q29udGVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJkZWxldGVDYXJkIiwibGlrZUNhcmQiLCJldnQiLCJ0YXJnZXQiLCJ0b2dnbGUiLCJjbG9zZVBvcHVwT25PdmVybGF5Q2xpY2siLCJjdXJyZW50VGFyZ2V0IiwiY2xvc2VQb3B1cCIsImNsb3NlQnlFc2MiLCJrZXkiLCJvcGVuUG9wdXAiLCJwb3B1cCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJwcm9maWxlRWRpdEJ1dHRvbiIsInByb2ZpbGVBZGRCdXR0b24iLCJwcm9maWxlRWRpdFBvcHVwIiwiY2FyZEFkZFBvcHVwIiwiaW1hZ2VQb3B1cCIsInByb2ZpbGVGb3JtIiwiZm9ybXMiLCJjYXJkRm9ybSIsIm5hbWVJbnB1dCIsImpvYklucHV0IiwicHJvZmlsZU5hbWUiLCJwcm9maWxlRGVzY3JpcHRpb24iLCJjYXJkc0NvbnRhaW5lciIsImNhcmROYW1lSW5wdXQiLCJjYXJkTGlua0lucHV0IiwiaW1hZ2VQb3B1cEltYWdlIiwiaW1hZ2VQb3B1cENhcHRpb24iLCJwbGFjZXNMaXN0Iiwib3Blbk1vZGFsIiwiaGFuZGxlRXNjYXBlS2V5IiwiY2xvc2VNb2RhbCIsImhhbmRsZU92ZXJsYXlDbGljayIsImhhbmRsZUltYWdlQ2xpY2siLCJjb25jYXQiLCJoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCIsInByZXZlbnREZWZhdWx0IiwicHJvZmlsZVRpdGxlIiwidmFsdWUiLCJwcm9maWxlUG9wdXAiLCJoYW5kbGVDYXJkRm9ybVN1Ym1pdCIsImhhbmRsZURlbGV0ZUNhcmQiLCJoYW5kbGVMaWtlQ2FyZCIsInByZXBlbmQiLCJyZXNldCIsImNhcmRQb3B1cCIsImhhbmRsZVByb2ZpbGVFZGl0Q2xpY2siLCJoYW5kbGVBZGRDYXJkQ2xpY2siLCJyZW5kZXJDYXJkIiwiZGF0YSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiYnV0dG9uIiwiY2xvc2VzdCIsImluaXRpYWxDYXJkcyIsImFwcGVuZCIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJBcnJheSIsImZyb20iLCJmb3JtRWxlbWVudCIsImVycm9yRWxlbWVudCIsImlkIiwiaGlkZUlucHV0RXJyb3IiLCJlcnJvck1lc3NhZ2UiLCJzaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiY2hlY2tJbnB1dFZhbGlkaXR5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiXSwic291cmNlUm9vdCI6IiJ9